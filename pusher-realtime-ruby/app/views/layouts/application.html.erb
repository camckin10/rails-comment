<!DOCTYPE html>
<html>
  <head>
    <title>PusherRealtimeRuby</title>
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>
    <%= stylesheet_link_tag 'application', media: 'all', 'data-turbolinks-track': 'reload' %>
    <script src ="https://js.pusher.com/4.1/pusher.min.js"></script>
    <script>
      var pusher = new Pusher('8b99e78211278a813110', {
      cluster: 'us2',
      encrypted: true
      });
    </script>
    <%= javascript_include_tag 'application', 'data-turbolinks-track': 'reload' %>
  </head>

  <body>
  <h1>Pusher Test</h1>
  <p>
    Try publishing an event to channel <code>my-channel</code>
    with event name <code>my-event</code>.
  </p>

  <h1 style = "text-align:center">Real-Time Comments!</h1>
	<div class = "wrapper">
		<img src ="https://image4.owler.com/logo/pusher_owler_20160228_200254_large.png" height="150"alt="Pusher"/>
		<div class="top">
			<%= form_with scope: :comment, url: '/comment/store', local: true do |form| %>
				<div class="form-group">
						<%= form.label :comment %>
						<%= form.text_field :comment %>
						<%= form.submit %>
				</div>

		<% end %>
	</div>

		<div class="bottom" id="comment_section">
				<h2>Comments</h2>
				<% @comments.each do |comment| %>
					<p><%= comment.comment %></p>
			<% end %>
		</div>
	</div>
  </body>
</html>
